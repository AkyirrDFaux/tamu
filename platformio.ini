; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[platformio]
default_envs = Valu_v2_0

[env:Valu_v2_0]
build_type = release
platform = https://github.com/Community-PIO-CH32V/platform-ch32v
framework = noneos-sdk
board = genericCH32V203G8R6
lib_deps = 
    https://github.com/hathach/tinyusb.git
	olikraus/U8g2
build_src_filter = 
    +<*> 
    +<../.pio/libdeps/Valu_v2_0/U8g2/src/clib>
build_flags = 
	-D SYSCLK_FREQ_144MHz_HSI=144000000
	-Os                       ; Optimize for size (standard)
    -ffunction-sections       ; Put each function in its own section
    -fdata-sections           ; Put each data item in its own section
    -fno-exceptions           ; Disable C++ exceptions (huge flash saver)
    -fno-rtti                 ; Disable C++ Runtime Type Information
    -fno-threadsafe-statics   ; Disable extra code for thread-safe local statics
    -fno-unwind-tables        ; Remove stack unwinding metadata
	-flto
	-Wl,--section-start=.fixed_data=0x0800E000 ;user memory
    -Wl,--gc-sections         ; Linker: Garbage collect unused sections
    -Wl,--strip-all
	-specs=nano.specs
	-I src
	-I .pio/libdeps/Valu_v2_0/U8g2/src/clib
	-D U8G2_WITHOUT_UNICODE          
    -D U8G2_WITHOUT_INTERRUPT        
    -D U8G2_WITHOUT_HW_I2C           
    -D U8G2_WITHOUT_CLIP_WINDOW_FEATURE 
	-D BOARD_Valu_v2_0
	-D USE_FIXED_POINT=1
monitor_speed = 115200

[env:Tamu_v2_0]
build_type = release
platform = espressif32
framework = espidf
board = esp32-c3-devkitc-02
board_build.flash_mode = dio
board_build.flash_size = 4MB
board_build.partitions = huge_app.csv
build_flags = 
	-D BOARD_Tamu_v2_0
	-D USE_FIXED_POINT=1
	-D CONFIG_ESP_CONSOLE_UART_CUSTOM=y
monitor_dtr = 0
monitor_rts = 0
monitor_speed = 115200
monitor_filters = esp32_exception_decoder

[env:Tamu_v1_0]
build_type = release
platform = espressif32
board = esp32dev
lib_deps = 
	fastled/FastLED
	madhephaestus/ESP32Servo
board_build.flash_mode = qio
board_build.partitions = huge_app.csv
board_build.flash_size = 4MB
build_flags = 
	-D BOARD_Tamu_v1_0
	-D USE_FIXED_POINT=0
monitor_dtr = 0
monitor_rts = 0
monitor_speed = 115200
monitor_filters = esp32_exception_decoder